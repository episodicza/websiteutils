var epsForms=function(e){"use strict";return e.initFormValidation=function(e,t={},n={},l=null){let o=document.getElementById(e);jQuery.validator.addMethod("validPhoneNumber",(function(e,t){if(e.trim()){const e=window.intlTelInputGlobals.getInstance(t);return e.isValidNumber()&&e.getNumber().length>11}return!0}),"Invalid phone number"),o.querySelectorAll("input[type='tel']").forEach((function(e){let t=window.intlTelInputGlobals.getInstance(e);null!=t&&t.destroy();const l={utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@18.1.1/build/js/utils.js",onlyCountries:["za"],allowDropdown:!0,autoPlaceholder:"aggressive",hiddenInput:e.name+"_e164"};t=window.intlTelInput(e,{...l,...n})}));let s={errorClass:"form-error",validClass:"form-valid",errorPlacement:function(e,t){t.parentElement.classList.contains("iti")?e.insertAfter(t.parent()):e.insertAfter(t)},highlight:function(e,t,n){e.classList.add(t).classList.remove(n)},unhighlight:function(e,t,n){e.classList.add(n).classList.remove(t)},submitHandler:async function(e){const t=e.querySelector("input[type='submit']");t.style.cursor="progress",t.disabled=!0;const n=e.parentElement.querySelector(".w-form-done"),l=e.parentElement.querySelector(".w-form-fail");let o={fields:Object.fromEntries(new FormData(formElem)),meta:{href:window.location.href}};fetch(e.getAttribute("action"),{method:e.getAttribute("method")||"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((s=>{successCallback&&successCallback(o);const i=e.getAttribute("redirect")||e.dataset.redirect||null;i?window.location.href=i:(e.style.display="none",l.style.display="none",n.style.display="block",$([document.documentElement,document.body]).animate({scrollTop:n.offset().top-250},300)),t.disabled=!1,t.style.cursor="default"})).catch((o=>{console.log(o),e.style.display="block",n.style.display="none",l.style.display="block",t.disabled=!1,t.style.cursor="default"}))}};$(o).validate({...s,...t})},e}({});
