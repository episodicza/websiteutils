var epsForms=function(t){"use strict";return t.initFormValidation=function(t,e={},n={},i=null){let o=$(document.getElementById(t));jQuery.validator.addMethod("validPhoneNumber",(function(t,e){if(t.trim()){const t=window.intlTelInputGlobals.getInstance(e);return t.isValidNumber()&&t.getNumber().length>11}return!0}),"Invalid phone number"),$("input[type='tel']",o).each((function(){let t=window.intlTelInputGlobals.getInstance(this);null!=t&&t.destroy();const e={utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@18.1.1/build/js/utils.js",onlyCountries:["za"],allowDropdown:!0,autoPlaceholder:"aggressive",hiddenInput:this.name+"_e164"};t=window.intlTelInput(this,{...e,...n})}));let r={errorClass:"form-error",validClass:"form-valid",errorPlacement:function(t,e){e.parent().hasClass("iti")?t.insertAfter(e.parent()):t.insertAfter(e)},highlight:function(t,e,n){$(t).addClass("field-error").removeClass("field-valid")},unhighlight:function(t,e,n){$(t).addClass("field-valid").removeClass("field-error")},submitHandler:function(t){const e=$(t),n=e.find("input[type='submit']");n.prop("disabled",!0).css("cursor","progress");const o=$(".w-form-done",e.parent()),r=$(".w-form-fail",e.parent()),l={fields:Object.fromEntries(new FormData(t)),meta:{href:window.location.href}};fetch(e.attr("action"),{method:e.attr("method")||"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then((t=>{i&&i(l);const s=e.attr("redirect")||e.data("redirect")||null;s?window.location.href=s:(e.hide(),r.hide(),o.show(),$([document.documentElement,document.body]).animate({scrollTop:o.offset().top-250},300)),n.prop("disabled",!1).css("cursor","default")})).catch((t=>{console.log(t),e.show(),r.show(),o.hide(),n.prop("disabled",!1).css("cursor","default")}))}};o.validate({...r,...e})},t}({});
